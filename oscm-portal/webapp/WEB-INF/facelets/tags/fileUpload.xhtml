<!-- Copyright FUJITSU LIMITED 2017-->
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:rich="http://richfaces.org/rich" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:a4j="http://richfaces.org/a4j" xmlns:adm="http://www.fujitsu.com/global/services/software/interstage"
  xmlns:t="http://myfaces.apache.org/tomahawk">

  <ui:param name="key" value="#{empty label ? 'common.filename' : label}" />
  <adm:outputLabel value="#{msg[key]}" rendered="#{(empty rendered or rendered) and (empty labels)}" required="true" />
  <t:div styleClass="jqUpload" rendered="#{empty rendered or rendered}" style="#{style}">
    <a4j:outputPanel styleClass="upload">
      <a4j:outputPanel styleClass="option">
        <a4j:outputPanel styleClass="#{disabled ? 'buttonDisabled':'button'}"
          style="float:right;margin:2px 2px 0 0px;">
          <a4j:outputPanel>
            <h:graphicImage url="/img/transparentPixel.png" styleClass="buttonImg fileUpload" rendered="#{empty marketplace or not marketplace}" />
            <h:outputText value="#{msg['button.browse']}" />
          </a4j:outputPanel>
        </a4j:outputPanel>
        <a4j:outputPanel styleClass="output" />
      </a4j:outputPanel>
    </a4j:outputPanel>
    <h:inputFile id="file" label="#{msg['common.filename']}" onchange="jQuery('.jqUpload .output').text(this.value);setDirty(true)" disabled="#{disabled}"
                 value="#{value}" size="48" styleClass="fileChooser" required="#{(empty required or required) and (empty rendered or rendered)}"
                 rendered="#{empty rendered or rendered}" requiredMessage="#{msg['error.upload.fileNotNullNorEmpty']}" />
  </t:div>
  <adm:message for="file" rendered="#{(empty rendered or rendered) and (empty labels)}" />

</ui:composition>