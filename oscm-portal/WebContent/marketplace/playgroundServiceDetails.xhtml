<!-- Copyright FUJITSU LIMITED 2020-->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:rich="http://richfaces.org/rich"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:a4j="http://richfaces.org/a4j"
                xmlns:adm="http://www.fujitsu.com/global/services/software/interstage"
                xmlns:mp="http://www.fujitsu.com/global/services/software/interstage/marketplace" template="templates/mainBootstrap.xhtml">
  <ui:define name="pageId">
    <c:set var="pageId" value="marketplace.details" />
    <c:set var="imgUrl" value="#{facesContext.externalContext.requestContextPath}/marketplace/img" />
    <adm:initialize initializingMethod="#{serviceDetailsCtrl.initialize}" />
  </ui:define>

  <ui:define name="feature">

  </ui:define>

  <ui:define name="breadcrumbs">
    <!-- This form controls the redirect in case the this site was accessed with non or an invalid serviceKey -->
    <h:form id="redirectForm">
      <!-- Save the errorKey as request attribute to display the error on the service list page -->
      <h:inputHidden value="#{errorKey}" />
      <h:commandButton id="btnRedirect" action="#{serviceDetailsCtrl.redirectToServiceList}" style="display: none;" />
    </h:form>
    <!-- The selectedServiceForDetails is empty if the passed serviceKey is not set, invalid or the service is not active -->
    <c:if test="#{serviceDetailsCtrl.serviceNotAvailable}">
      <script type="text/javascript">
        #{rich:element('btnRedirect')}.click();
      </script>
    </c:if>
  </ui:define>


  <ui:define name="contents">
    <c:if test="#{serviceListingBean.publicLandingpage}">
      <ui:include id="listServicesForPublicLandingpage" src="bootstrapServiceDetails.xhtml" />
    </c:if>
    <c:if test="#{not serviceListingBean.publicLandingpage}">
      <ui:include id="listServicesForEnterpriseLandingpage" src="enterpriseLandingpage.xhtml" />
    </c:if>
  </ui:define>
</ui:composition>