<!-- Copyright FUJITSU LIMITED 2020 -->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:mp="http://www.fujitsu.com/global/services/software/interstage/marketplace"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
>
  <a4j:outputPanel layout="block" styleClass="#{selfRegistrationAllowed ? 'col1span':''} firstcol ndh">

    <c:if test="#{not serviceLogin}">
      <h2 class="mt-2">
        <h:outputText value="#{msg['login.loginLabel']}"/>
      </h2>
      <c:if test="#{selfRegistrationAllowed}">

        <mp:labelAndInputTextBootstrap id="loginUserId" label="#{msg['user.userId']}" value="#{userBean.userId}"
                                       required="true"
                                       binding="#{userBean.genericInput}"
        />
        <mp:labelAndInputSecretBootstrap id="loginPassword" label="#{msg['user.password']}" required="true"
                                         value="#{userBean.password}" size="25" binding="#{userBean.genericInput}"
                                         maxlength="#{appBean.nameLen}"
                                         onkeydown="AdmUtils.clickOnReturn(event,'loginButtonLink')"/>
        <br/>
      </c:if>
    </c:if>
    <!-- For service login and for marketplace login with disallowed self-registration we use the same three columns layout-->
    <c:if test="#{serviceLogin or not selfRegistrationAllowed}">
      <mp:labelAndInputTextBootstrap id="loginUserId" label="#{msg['user.userId']}" displayRequired="false"
                                     required="true" value="#{userBean.userId}" binding="#{userBean.genericInput}"
                                     inputStyle="fieldS w-100" maxlength="#{appBean.userIdLen}" validatorId="userId"/>
      <mp:labelAndInputSecretBootstrap id="loginPassword" label="#{msg['user.password']}:" required="true"
                                       value="#{userBean.password}" size="25"
                                       maxlength="#{appBean.nameLen}" inputStyle="w-100"
                                       binding="#{userBean.genericInput}"
                                       onkeydown="AdmUtils.clickOnReturn(event,'loginButtonLink')"/>
    </c:if>
    <div class="mb-2">
      <h:outputLink id="redirecLink"
                    onclick="location.href='#{facesContext.externalContext.requestContextPath}/marketplace/recoverPassword.jsf';return false;"
                    rendered="#{appBean.internalAuthMode}">
        <span><h:outputText value="#{msg['public.login.recoverpasswordlink.hint']}"/></span>
      </h:outputLink>
    </div>
    <div>
      <mp:buttonBootstrap styleClass="btn-sm btn-secondary" id="loginButton" value="#{msg['button.login']}"
                          bean="#{userBean}"
                          action="login" render="rerenderPanel"
                          oncomplete="AdmUtils.setLoginPanelDirty();AdmUtils.showProgress(false);"/>
    </div>
  </a4j:outputPanel>
</ui:composition>