<!-- Copyright FUJITSU LIMITED 2020-->
<!DOCTYPE html >
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:f="http://xmlns.jcp.org/jsf/core"
>
  <h:form id="categorySelectionForm"
          rendered="#{marketplaceConfigurationBean.currentConfiguration.categoriesEnabled}">
    <f:phaseListener binding="#{categorySelectionBean.listener}"/>
    <!-- Browse all services button container-->
    <div>
      <h:commandButton id="browseAllBtn" action="#{serviceListingBean.showServiceList}"
                       value="#{msg['button.browseAll']}"
                       class="btn btn-secondary btn-lg text-lg-left text-center btn-block text-wrap">
        <f:setPropertyActionListener target="#{servicePagingBean.filterTag}" value=""/>
        <f:setPropertyActionListener target="#{categorySelectionBean.selectedCategoryId}" value=""/>
        <f:setPropertyActionListener target="#{servicePagingBean.filterCategoryForDisplay}" value=""/>
      </h:commandButton>
    </div>
    <!-- Service categories list container-->
    <c:if test="#{categorySelectionBean.hasCategories}">
      <div class="list-group shadow mb-2">
        <c:forEach items="#{categorySelectionBean.categoriesForMarketplace}" var="cat">
          <!-- Selected category -->
          <c:if test="#{cat.categoryId eq categorySelectionBean.selectedCategoryId}">
            <h:commandLink value="#{cat.displayName}"
                           styleClass="list-group-item list-group-item-action list-group-item-secondary active text-center text-lg-left"
                           action="#{categorySelectionBean.selectByCategory}"
                           actionListener="#{serviceListingBean.reloadData}">
              <f:setPropertyActionListener target="#{categorySelectionBean.selectedCategoryId}"
                                           value="#{cat.categoryId}"/>
              <f:setPropertyActionListener target="#{servicePagingBean.filterCategoryForDisplay}"
                                           value="#{cat.displayName}"/>
            </h:commandLink>
          </c:if>
          <!-- Not selected category -->
          <c:if test="#{cat.categoryId ne categorySelectionBean.selectedCategoryId}">
            <h:commandLink value="#{cat.displayName}"
                           styleClass="list-group-item list-group-item-action text-center text-lg-left"
                           action="#{categorySelectionBean.selectByCategory}"
                           actionListener="#{serviceListingBean.reloadData}">
              <f:setPropertyActionListener target="#{categorySelectionBean.selectedCategoryId}"
                                           value="#{cat.categoryId}"/>
              <f:setPropertyActionListener target="#{servicePagingBean.filterCategoryForDisplay}"
                                           value="#{cat.displayName}"/>
            </h:commandLink>
          </c:if>
        </c:forEach>
      </div>
    </c:if>
  </h:form>
</ui:composition>
