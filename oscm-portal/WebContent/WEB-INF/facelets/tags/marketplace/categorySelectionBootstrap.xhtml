<!-- Copyright FUJITSU LIMITED 2018-->
<!DOCTYPE html >
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:mp="http://www.fujitsu.com/global/services/software/interstage/marketplace">
    <h:form id="categorySelectionForm"
            rendered="#{marketplaceConfigurationBean.currentConfiguration.categoriesEnabled}">
        <f:phaseListener binding="#{categorySelectionBean.listener}"/>
            <!-- Browse all services button container-->
            <div>
                <h:commandButton id="browseAllBtn" action="#{serviceListingBean.showServiceList}" value="#{msg['button.browseAll']}"
                class="btn-sm btn-secondary btn-lg btn-block text-wrap">
                    <f:setPropertyActionListener target="#{servicePagingBean.filterTag}" value=""/>
                    <f:setPropertyActionListener target="#{categorySelectionBean.selectedCategoryId}" value=""/>
                    <f:setPropertyActionListener target="#{servicePagingBean.filterCategoryForDisplay}" value=""/>
                </h:commandButton>
<!--                <mp:button id="buttonBrowseAll" value="#{msg['button.browseAll']}" bean="#{serviceListingBean}"-->
<!--                           action="showServiceList">-->
<!--                </mp:button>-->
            </div>
            <!-- Browse all services button container-->
            <c:if test="#{categorySelectionBean.hasCategories}">
                <div>
                    <ul class="list-group">
                        <c:forEach items="#{categorySelectionBean.categoriesForMarketplace}" var="cat">
                            <c:if test="cat.categoryId eq categorySelectionBean.selectedCategoryId">
                                <li class="list-group-item list-group-item-action active">
                                    <h:commandLink value="#{cat.displayName}"
                                                   action="#{categorySelectionBean.selectByCategory}"
                                                   actionListener="#{serviceListingBean.reloadData}">
                                        <f:setPropertyActionListener target="#{categorySelectionBean.selectedCategoryId}"
                                                                     value="#{cat.categoryId}"/>
                                        <f:setPropertyActionListener target="#{servicePagingBean.filterCategoryForDisplay}"
                                                                     value="#{cat.displayName}"/>
                                    </h:commandLink>
                                </li>
                            </c:if>
                            <c:if test="cat.categoryId ne categorySelectionBean.selectedCategoryId">
                                <li class="list-group-item list-group-item-action active">
                                    <h:commandLink value="#{cat.displayName}"
                                                   action="#{categorySelectionBean.selectByCategory}"
                                                   actionListener="#{serviceListingBean.reloadData}">
                                        <f:setPropertyActionListener target="#{categorySelectionBean.selectedCategoryId}"
                                                                     value="#{cat.categoryId}"/>
                                        <f:setPropertyActionListener target="#{servicePagingBean.filterCategoryForDisplay}"
                                                                     value="#{cat.displayName}"/>
                                    </h:commandLink>
                                </li>
                            </c:if>

                            <li class="list-group-item list-group-item-action">
                                <h:commandLink value="#{cat.displayName}"
                                               action="#{categorySelectionBean.selectByCategory}"
                                               actionListener="#{serviceListingBean.reloadData}">
                                    <f:setPropertyActionListener target="#{categorySelectionBean.selectedCategoryId}"
                                                                 value="#{cat.categoryId}"/>
                                    <f:setPropertyActionListener target="#{servicePagingBean.filterCategoryForDisplay}"
                                                                 value="#{cat.displayName}"/>
                                </h:commandLink>
                            </li>
                        </c:forEach>
                    </ul>
                </div>
            </c:if>
    </h:form>
</ui:composition>
