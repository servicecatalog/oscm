<!-- Copyright FUJITSU LIMITED 2020 -->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:adm="http://www.fujitsu.com/global/services/software/interstage"
                xmlns:mp="http://www.fujitsu.com/global/services/software/interstage/marketplace"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

  <mp:outputStepBootstrap value="#{msg['payment.select.label']}"/>
  <!-- Address -->
  <div class="row">
    <div class="col-md-8 col-sm-12">
      <div class="no-gutters row p-1">
        <div class="col-md-3 col-sm-12">
          <h:outputText id="label1"
                        value="#{msg['payment.billingContact']}:"/>
          <h:outputText value=" *" styleClass="mandatory"/>
        </div>
        <div class="col-md-9 col-sm-12">
          <h:selectOneMenu id="selectBillingContact" styleClass="select w-100"
                           required="#{!empty param['payment:next']}"
                           value="#{subscriptionWizardConversation.selectedBillingContact}"
                           disabled="false"
                           rendered="#{subscriptionWizardConversation.billingContactVisible}"
                           onchange="setDirtyOnManageSubscriptionModelAddress(true);"
                           converter="#{billingContactConverter}">
            <adm:selectItemPleaseSelect itemValue=""/>
            <f:selectItems value="#{billingContactBean.billingContacts}"
                           var="bc" itemLabel="#{bc.id}" itemValue="#{bc}"/>
          </h:selectOneMenu>
          <h:outputText id="noBillingContact"
                        value="#{msg['organization.payment.noBillingContact']}"
                        rendered="#{not userBean.loggedInAndAdmin and empty billingContactBean.billingContacts}"/>
        </div>
      </div>
      <div class="no-gutters row p-1">
        <div class="col-12">
          <h:outputLink value="#" id="newBillingContact"
                        onclick="newBillingContact(); return false;"
                        rendered="#{userBean.loggedInAndAdmin}">
            <h:outputText
                value="#{msg['payment.new.BillingContact.title']}"/>
          </h:outputLink>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-12">
      <a4j:outputPanel id="bcInformation" layout="block" styleClass="p-1">
        <mp:message for="selectBillingContact"
                    rendered="#{empty subscriptionWizardConversation.model.selectedBillingContact}"/>
        <ui:fragment rendered="#{not empty subscriptionWizardConversation.model.selectedBillingContact}">
          <a4j:outputPanel layout="block" styleClass="marginBottom10">
            <h:outputText value="#{subscriptionWizardConversation.model.selectedBillingContact.email}" id="email"/>
          </a4j:outputPanel>
          <a4j:outputPanel layout="block">
            <h:outputText value="#{subscriptionWizardConversation.model.selectedBillingContact.companyName}"
                          id="companyName"/>
          </a4j:outputPanel>
          <a4j:outputPanel layout="block">
            <h:outputText value="#{subscriptionWizardConversation.model.selectedBillingContact.address}" id="address"/>
          </a4j:outputPanel>
        </ui:fragment>
      </a4j:outputPanel>
    </div>
  </div>
  <!-- Payment -->
  <div class="row">
    <div class="col-md-8 col-sm-12">
      <div class="no-gutters row p-1">
        <div class="col-md-3 col-sm-12">
          <h:outputText id="label2" value="#{msg['payment.paymentOption']}:"/>
          <h:outputText value=" *" styleClass="mandatory"/>
        </div>
        <div class="col-md-9 col-sm-12">
          <h:selectOneMenu id="selectPaymentInfo" styleClass="select w-100"
                           required="#{!empty param['payment:next']}"
                           value="#{subscriptionWizardConversation.selectedPaymentInfo}"
                           disabled="false"
                           rendered="#{paymentInfoVisible}"
                           onchange="setDirtyOnManageSubscriptionModelPayment(true);"
                           converter="#{paymentTypeConverter}">
            <adm:selectItemPleaseSelect itemValue=""/>
            <f:selectItems
                value="#{subscriptionWizardConversation.paymentInfosForSubscription}"
                var="pi" itemLabel="#{pi.id}" itemValue="#{pi}"/>
          </h:selectOneMenu>
          <h:outputText value="#{subscriptionWizardConversation.paymentMissingText}"
                        id="noPaymenttypesAvailableForAdmin"
                        rendered="#{not paymentInfoVisible}"/>
        </div>
      </div>
      <div class="no-gutters row p-1">
        <div class="col-12">
          <a4j:outputPanel layout="block" rendered="#{availableSubsAndAdmin}">
            <h:outputLink value="" id="newPaymentInfo"
                          onclick="newPaymentItem('#{subscriptionWizardConversation.model.service.key}'); return false;">
              <h:outputText value="#{msg['payment.new.PaymentOption.title']}"/>
            </h:outputLink>
          </a4j:outputPanel>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-12">
      <a4j:outputPanel id="piInformation" layout="block">
        <mp:message for="selectPaymentInfo"
                    rendered="#{empty subscriptionWizardConversation.model.selectedPaymentInfo}"/>
        <ui:fragment
            rendered="#{not empty subscriptionWizardConversation.model.selectedPaymentInfo}">
          <a4j:outputPanel layout="block">
            <h:outputText
                value="#{subscriptionWizardConversation.model.selectedPaymentInfo.providerName}"
                id="provider"/>
          </a4j:outputPanel>
          <a4j:outputPanel layout="block">
            <h:outputText
                value="#{subscriptionWizardConversation.model.selectedPaymentInfo.accountNumber}"
                id="account"/>
          </a4j:outputPanel>
        </ui:fragment>
      </a4j:outputPanel>
    </div>
  </div>
</ui:composition>