<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
>

    <c:set var="hasPrev" value="#{servicePagingBean.previousAvailable}"/>
    <c:set var="hasNext" value="#{servicePagingBean.nextAvailable}"/>
    <c:set var="firstPage" value="#{servicePagingBean.firstVisiblePage}"/>
    <c:set var="lastPage" value="#{servicePagingBean.lastVisiblePage}"/>


    <div class="container">
        <div class="row row justify-content-around">
            <div class="col-md">
                <div class="row">
                    <!--  Number of services and filter tag info -->
                    <div class="col-auto">
                        <p id="listInfo#{prefix}">
                            <h:outputFormat value="#{msg['catalog.selectedTag.pageInfo']}" escape="true">
                                <f:param value="#{servicePagingBean.firstOnPage}"/>
                                <f:param value="#{servicePagingBean.lastOnPage}"/>
                                <f:param value="#{servicePagingBean.resultSize}"/>
                            </h:outputFormat>
                        </p>
                    </div>
                    <div class="col-auto">
                        <div class="row">
                            <!--  Previous button -->
                            <div class="col-auto">
                                <c:if test="#{servicePagingBean.previousAvailable}">
                                    <h:outputLink id="pagePrevious#{prefix}" styleClass="previous "
                                                  onclick="#{rich:element('selectPage')}.value='#{servicePagingBean.selectedPage - 1}';#{rich:element('selectPagingButton')}.click();return false;">
                                        #{msg['paging.previous']}
                                    </h:outputLink>
                                </c:if>
                                <c:if test="#{not servicePagingBean.previousAvailable}">
                                    <p id="previous#{prefix}" class="previous disabled">#{msg['paging.previous']}</p>
                                </c:if>
                            </div>
                            <!-- Page selection -->
                            <div class="col-auto">
                                <ul class="pagingElement">
                                    <c:forEach items="#{servicePagingBean.visiblePages}" var="selpage" varStatus="status">
                                        <li>
                                            <c:if test="#{selpage eq servicePagingBean.selectedPage}">
                                                <strong class="current ">#{selpage}</strong>
                                            </c:if>
                                            <c:if test="#{selpage ne servicePagingBean.selectedPage}">
                                                <h:outputLink id="link#{prefix}Page#{selpage}" value=""
                                                              onclick="#{rich:element('selectPage')}.value='#{selpage}';#{rich:element('selectPagingButton')}.click();return false;">
                                                    #{selpage}
                                                </h:outputLink>
                                            </c:if>
                                        </li>
                                    </c:forEach>
                                </ul>
                            </div>
                            <!-- Next selection -->
                            <div class="col-auto">
                                <c:if test="#{servicePagingBean.nextAvailable}">
                                    <h:outputLink styleClass="#{next} next "
                                                  onclick="#{rich:element('selectPage')}.value='#{servicePagingBean.selectedPage + 1}';#{rich:element('selectPagingButton')}.click();return false;"
                                                  id="pageNext#{prefix}">
                                        #{msg['paging.next']}
                                    </h:outputLink>
                                </c:if>
                                <c:if test="#{not servicePagingBean.nextAvailable}">
                                    <p id="next#{prefix}" class="next disabled">#{msg['paging.next']}</p>
                                </c:if>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Right menu container -->
            <div class="col-md">
                <div class="row justify-content-end">
                    <!-- Show p -->
                    <div class="col-auto">
                        <p>#{msg['paging.show']}</p>
                    </div>
                    <!-- Page size buttons -->
                    <div class="col-auto">
                        <c:forEach items="#{servicePagingBean.availablePagesSizes}" var="size" varStatus="status">
                            <c:if test="#{size eq servicePagingBean.pageSize}">
                                <strong class="current">#{size}</strong>
                            </c:if>
                            <c:if test="#{size ne servicePagingBean.pageSize}">
                                <h:outputLink styleClass="linkNormal" id="pagingSize#{prefix}#{size}" value=""
                                              onclick="#{rich:element('pageSize')}.value='#{size}';#{rich:element('listButton')}.click();return false;">
                                    #{size}
                                </h:outputLink>
                            </c:if>
                        </c:forEach>
                    </div>
                    <!-- Sorting select menu -->
                    <div class="col-auto">
                        <h:selectOneMenu styleClass="sortingCombo" value="#{servicePagingBean.sorting}"
                                         onchange="AdmUtils.selectDropDownOption(this, 'showListForm', 'sortingOrder', 'listButton');">
                            <c:forEach items="#{servicePagingBean.sortingCriteria}" var="key" varStatus="status">
                                <c:set var="sortKey" value="catalog.sortorder.#{key}"/>
                                <f:selectItem id="sort#{prefix}#{key}" itemLabel="#{msg[sortKey]}" itemValue="#{key}"/>
                            </c:forEach>
                        </h:selectOneMenu>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Hidden items -->
    <c:if test="#{generateForm}">
        <h:form id="selectPagingForm">
            <h:inputHidden value="#{servicePagingBean.selectedPage}" id="selectPage"/>
            <h:commandButton style="display:none;" id="selectPagingButton" value=""
                             action="#{serviceListingBean.showServiceList}"/>
        </h:form>

        <h:form id="showListForm">
            <h:inputHidden value="#{servicePagingBean.filterTag}" id="filterTag"/>
            <h:inputHidden value="#{servicePagingBean.pageSize}" id="pageSize"/>
            <h:inputHidden value="#{servicePagingBean.sorting}" id="sortingOrder"/>
            <h:commandButton style="display:none;" id="listButton" value=""
                             action="#{serviceListingBean.showServiceList}"/>
        </h:form>
    </c:if>

</ui:composition>